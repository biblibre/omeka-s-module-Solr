# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.19.1] - 2025-01-22

- Fix transformations setting in default mappings
- Deny access to solr_* resources through the API to non-admin users (#42)

## [0.19.0] - 2024-11-28

- Ignore leading and trailing whitespaces in query (#19)
- Add default mappings and search fields at install

## [0.18.0] - 2024-10-25

- Add compatibility with Search 0.16.0
- If the [Group](https://omeka.org/s/modules/Group) module is enabled, there's
  a new option in node settings that allow to index resources' groups. This
  allows non-admin users to view private resources that belong to their groups
  in search results.

## [0.17.1] - 2024-10-03

- Fix installation process and tests

## [0.17.0] - 2024-10-03

- Prevent users to create different nodes with the same URI

## [0.16.0] - 2024-07-12

### Breaking changes
- Solr versions older that 5.1.0 are no longer supported

### Changed
- PHP Solr extension is no longer required
- Configuration is done using a single URI parameter instead of several
  parameters (hostname, port, path). This means that HTTPS can be used now.

## [0.15.0] - 2024-07-11

### Added
- Add pagination and sort controls on mappings browse page
- Add pagination and sort controls on search fields browse page
- Add sidebar to show mapping details on browse page

### Fixed
- Fix "matches pattern" operator by using wildcard search instead of regular
  expression which is not documented and seems to not be supported anymore

## [0.14.0] - 2024-01-10

### Added
- Added ability to use HTTP Authentication

### Fixed
- Make hl.maxAnalyzedChars configurable
- Fix text for transformations to be removed


## [0.13.1] - 2023-12-12

- Fix indexation of DateTime values

## [0.13.0] - 2023-12-08

The minimum PHP version required is now 8.0 and the minimum Omeka version is
now 3.1.0

- Add mapping transformations. They allow to modify values before them being
  sent to Solr. This replaces the following mapping settings: Data types,
  Resource field, Formatter.
  Value formatters implemented by other Omeka modules are still supported but
  this system is deprecated. They should switch to transformations

## [0.12.0] - 2023-11-16

- Add highlighting feature when enabled by module preferences

## [0.11.0] - 2023-11-16

### Added

- Format query string to include proximity search
- New option for mapping: "Resource field" allow to choose if resource's title
  or resource's ID should be indexed (only for values that are resources)
- New option for mapping: "Data types" allow to limit which types of data will
  get indexed

### Changed

- Allow value formatters to return an array

## [0.10.0] - 2023-05-04

This version is now compatible with Omeka S 4.0.0

The minimum Omeka S version required is 3.0.0

## [0.9.4] - 2022-12-05

### Fixed

- Fixed Querier::escapeRegexp so that it also escapes Solr special characters

## [0.9.3] - 2022-10-27

### Fixed

- Fixed search fields retrieval from the database (#20)
- Fixed the inability to have two search fields with the same name in two
  different nodes

## [0.9.2] - 2022-05-11

### Fixed
- Special caracters in main query are now escaped 

## [0.9.1] - 2022-05-10

### Fixed

- Extract values from other data types as well
- Add a default value for 'is_public_field' node setting
- Silence out warnings generated by SolrClient::ping()
- Use DROP FOREIGN KEY instead of DROP CONSTRAINT for older versions of
  MySQL/MariaDB

## [0.9.0] - 2021-04-14
### Added
- Added ability to import mappings from a URL
- Implemented the 'isPublic' part of the query

### Changed
- Made the indexer more quiet to avoid filling the job logs

## [0.8.0] - 2020-10-14

**BREAKING CHANGE** The module is no longer compatible with Omeka S 2.x

- Add compatibility with Omeka S 3.x

## [0.7.1] - 2020-10-09

### Added

- Add operator 'contains expression'

### Changed

- Reword 'is like' to 'matches pattern'

### Fixed

- Fixed omeka version contraint in config/module.ini

## [0.7.0] - 2020-09-28

### Added

- Return the list of valid operators for each search field

### Fixed

- Avoid warning when no facets are returned

## [0.6.0] - 2020-04-08

### Added

- Trigger events in value extractors to allow other modules to add fields
- Added ability to declare search fields
- Added ability to define `qf` and `mm` parameters
- Implemented several search operators (contains any word, contains all words,
  is like)


## [0.5.0] - 2020-03-06

### Added

- Added PlainText value formatter to trip HTML tags

### Changed

- Omeka S >= 2.0.0 required
- Travis: Test code style with php-cs-fixer
- Extract title as value for resource values

### Fixed

- Fix fq parameter for resource name
- Fixed compatibility issues with Omeka S 2.x


## [0.4.0] - 2017-11-09

### Changed

- Travis: use node 7
- Travis: Use phpenv's pecl to install solr extension

## [0.3.0] - 2017-08-07

### Changed

- Update code to work with Search 0.3.0

### Fixed

- Fix display of actions links in tables


## [0.2.0] - 2017-06-30

### Added

- Allow simple date in DateRange value formatter

### Changed

- Simplified configuration form
- Allow everyone to use all api adapters

### Fixed

- Fixed display of actions in 'browse' pages
- Added required [info] header in module.ini
- Fixed some issues with Travis


## [0.1.2] - 2016-12-20

First release

[0.19.1]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.19.1
[0.19.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.19.0
[0.18.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.18.0
[0.17.1]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.17.1
[0.17.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.17.0
[0.16.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.16.0
[0.15.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.15.0
[0.14.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.14.0
[0.13.1]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.13.1
[0.13.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.13.0
[0.12.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.12.0
[0.11.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.11.0
[0.10.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.10.0
[0.9.4]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.9.4
[0.9.3]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.9.3
[0.9.2]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.9.2
[0.9.1]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.9.1
[0.9.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.9.0
[0.8.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.8.0
[0.7.1]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.7.1
[0.7.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.7.0
[0.6.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.6.0
[0.5.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.5.0
[0.4.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.4.0
[0.3.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.3.0
[0.2.0]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.2.0
[0.1.2]: https://github.com/biblibre/omeka-s-module-Solr/releases/tag/v0.1.2
