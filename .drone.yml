---
kind: pipeline
type: docker
name: omeka:3.0.2 php:7.4 mysql:5.7

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.0.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mysql:5.7
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.0.2 php:7.4 mysql:8.0

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.0.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mysql:8.0
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.0.2 php:7.4 mariadb:10.3

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.0.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.3
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.0.2 php:7.4 mariadb:10.4

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.0.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.4
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.0.2 php:7.4 mariadb:10.5

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.0.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.5
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.0.2 php:7.4 mariadb:10.6

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.0.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.6
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.0.2 php:7.4 mariadb:10.7

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.0.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.7
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:7.4 mysql:5.7

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mysql:5.7
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:7.4 mysql:8.0

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mysql:8.0
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:7.4 mariadb:10.3

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.3
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:7.4 mariadb:10.4

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.4
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:7.4 mariadb:10.5

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.5
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:7.4 mariadb:10.6

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.6
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:7.4 mariadb:10.7

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.7
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:8.0 mysql:5.7

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mysql:5.7
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:8.0 mysql:8.0

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mysql:8.0
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:8.0 mariadb:10.3

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.3
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:8.0 mariadb:10.4

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.4
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:8.0 mariadb:10.5

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.5
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:8.0 mariadb:10.6

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.6
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.1.2 php:8.0 mariadb:10.7

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.1.2-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.7
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:7.4 mysql:5.7

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mysql:5.7
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:7.4 mysql:8.0

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mysql:8.0
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:7.4 mariadb:10.3

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.3
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:7.4 mariadb:10.4

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.4
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:7.4 mariadb:10.5

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.5
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:7.4 mariadb:10.6

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.6
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:7.4 mariadb:10.7

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php7.4
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.7
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:8.0 mysql:5.7

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mysql:5.7
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:8.0 mysql:8.0

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mysql:8.0
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:8.0 mariadb:10.3

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.3
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:8.0 mariadb:10.4

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.4
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:8.0 mariadb:10.5

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.5
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:8.0 mariadb:10.6

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.6
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: pipeline
type: docker
name: omeka:3.2.0 php:8.0 mariadb:10.7

platform:
  os: linux
  arch: amd64

workspace:
  path: omeka-s/modules/Solr

steps:
- name: test
  pull: always
  image: biblibre/omeka-s-ci:3.2.0-php8.0
  commands:
  - cp -rT /usr/src/omeka-s ../..
  - git clone --depth 1 https://github.com/biblibre/omeka-s-module-Search.git ../Search
  - echo 'host = "db"\nuser = "root"\npassword = "root"\ndbname = "omeka_test"\n' > ../../application/test/config/database.ini
  - php ../../build/composer.phar install
  - bash -c "cd ../.. && php /usr/local/libexec/wait-for-db.php"
  - ../../vendor/bin/phpunit
  - ../../node_modules/.bin/gulp test:module:cs

services:
- name: db
  image: mariadb:10.7
  environment:
    MYSQL_DATABASE: omeka_test
    MYSQL_ROOT_PASSWORD: root

---
kind: signature
hmac: 7ace5743082d3a7953627f0ea93d0479424594e75972e5fdcd9ad53a677d7781

...
